<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Modifier Ressource | BiblioNet</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>

<body>

<!-- HEADER / SIDEBAR -->
<div th:replace="layout/header :: header"></div>
<div th:replace="layout/sidebar :: sidebar"></div>

<main class="content">

    <div class="page-header">
        <div>
            <h2>✏️ Modifier une ressource</h2>
            <p class="text-muted">Mettre à jour les informations</p>
        </div>
    </div>

    <div class="card form-card">

        <form th:action="@{'/ressources/update/' + ${ressource.id}}"
              method="post" enctype="multipart/form-data">

            <div class="form-grid">

                <!-- TITRE -->
                <div class="form-group">
                    <label>Titre</label>
                    <input type="text" name="titre" th:value="${ressource.titre}" required>
                </div>

                <!-- AUTEUR -->
                <div class="form-group">
                    <label>Auteur</label>
                    <input type="text" name="auteur" th:value="${ressource.auteur}" required>
                </div>

                <!-- TYPE -->
                <div class="form-group">
                    <label>Type de ressource</label>
                    <select name="typeRessource" required>
                        <option th:selected="${ressource.typeRessource == 'LIVRE'}" value="LIVRE">Livre</option>
                        <option th:selected="${ressource.typeRessource == 'MEDIA'}" value="MEDIA">Média</option>
                        <option th:selected="${ressource.typeRessource == 'DOCUMENT_NUMERIQUE'}" value="DOCUMENT_NUMERIQUE">Document numérique</option>
                    </select>
                </div>

                <!-- CATEGORIE -->
                <div class="form-group">
                    <label>Catégorie</label>
                    <select name="categorie" required>
                        <option th:selected="${ressource.categorie == 'LITTERATURE'}" value="LITTERATURE">Littérature</option>
                        <option th:selected="${ressource.categorie == 'SCIENCES'}" value="SCIENCES">Sciences</option>
                        <option th:selected="${ressource.categorie == 'HISTOIRE'}" value="HISTOIRE">Histoire</option>
                        <option th:selected="${ressource.categorie == 'ARTS'}" value="ARTS">Arts</option>
                        <option th:selected="${ressource.categorie == 'TECHNOLOGIE'}" value="TECHNOLOGIE">Technologie</option>
                        <option th:selected="${ressource.categorie == 'JEUNESSE'}" value="JEUNESSE">Jeunesse</option>
                        <option th:selected="${ressource.categorie == 'MULTIMEDIA'}" value="MULTIMEDIA">Multimédia</option>
                    </select>
                </div>

                <!-- QUANTITÉ -->
                <div class="form-group">
                    <label>Quantité totale</label>
                    <input type="number" name="quantiteTotale" min="1" th:value="${stock.quantiteTotale}" required>
                </div>

                <!-- COUVERTURE ACTUELLE -->
                <div class="form-group">
                    <label>Couverture actuelle</label>
                    <div th:if="${ressource.cheminCouverture != null}">
                        <img th:src="@{'/uploads/covers/' + ${ressource.cheminCouverture}}"
                             style="width:120px;border-radius:4px;">
                    </div>
                    <div th:if="${ressource.cheminCouverture == null}">
                        <p class="text-muted">Aucune image</p>
                    </div>
                </div>

                <!-- NOUVELLE COUVERTURE -->
                <div class="form-group">
                    <label>Changer la couverture</label>
                    <input type="file" name="couvertureFile" accept="image/*">
                </div>

            </div>

            <div class="form-actions">
                <a th:href="@{/ressources}" class="btn btn-secondary">Annuler</a>
                <button type="submit" class="btn btn-primary">Mettre à jour</button>
            </div>

        </form>

    </div>

</main>

<div th:replace="layout/footer :: footer"></div>

</body>
</html>
