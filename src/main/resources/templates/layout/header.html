<header th:fragment="header" class="header">

    <div class="header-left">
        <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
        <span class="app-title">ðŸ“˜ BiblioNet</span>
    </div>

    <div class="header-right" th:if="${currentUser != null}">

        <!-- ðŸ”” NOTIFICATIONS LECTEUR -->
        <div th:if="${currentUser.role.name() == 'LECTEUR'}"
             id="notifContainer"
             style="position:relative; margin-right:20px; cursor:pointer;">

            <!-- IcÃ´ne cloche -->
            <span id="notifBell" style="font-size:22px;">ðŸ””</span>

            <!-- Compteur -->
            <span id="notifCount"
                  style="background:red; color:white;
                         border-radius:50%; padding:2px 6px;
                         font-size:12px; position:absolute; top:-5px; right:-10px;
                         display:none;">
            </span>

            <!-- Liste -->
            <div id="notifList"
                 style="display:none; position:absolute; right:0; top:30px;
                        width:280px; background:white; border:1px solid #ccc;
                        border-radius:6px; padding:10px; z-index:999;
                        box-shadow:0 2px 6px rgba(0,0,0,0.2);">
                <strong>Notifications</strong>
                <ul id="notifItems"
                    style="list-style:none; padding-left:0; margin-top:10px;"></ul>
            </div>
        </div>

        <!-- ðŸ‘¤ INFO UTILISATEUR -->
        <div class="user-info">
            <span class="user-email" th:text="${currentUser.email}"></span>

            <span class="role-badge" th:switch="${currentUser.role.name()}">
                <span th:case="'SUPER_ADMIN'">Super Admin</span>
                <span th:case="'ADMIN'">Admin</span>
                <span th:case="'BIBLIOTHECAIRE'">BibliothÃ©caire</span>
                <span th:case="'LECTEUR'">Lecteur</span>
                <span th:case="*">Utilisateur</span>
            </span>

            <span th:if="${currentUser.bibliotheque != null}">
                | <strong th:text="${currentUser.bibliotheque.nom}"></strong>
            </span>
        </div>

        <!-- Logout -->
        <form th:action="@{/logout}" method="post">
            <button class="logout-btn">DÃ©connexion</button>
        </form>
    </div>

</header>
